---
description: Enforces directory restrictions for the main branch
globs: ["**/*"]
alwaysApply: true
---

# Main Branch Directory Restrictions

## Overview

This rule enforces that when working on the main branch, modifications should ONLY be made to files within:
- `/clients/**`
- `/shared/**`
- `/scripts/**` (selective modifications only)

## Directory Rules

1. **Allowed Directories:**
   - `/clients/**` - Client-specific implementations
   - `/shared/**` - Shared resources, documentation, and components
   - `/scripts/**` - Limited script modifications (see guidelines)

2. **Restricted Directories:**
   - `/admin/**` - Admin tree is restricted on main branch
   - `/.github/**` - GitHub configuration
   - `/tools/**` - Development tools
   - Any other directories not explicitly allowed

## Branch Guidance

When working on the main branch:
1. Always pull the latest changes before beginning work
2. Make small, focused commits
3. Include clear commit messages referencing the relevant components
4. Create a new branch for major changes

## Script Modification Guidelines

When modifying files in `/scripts/**`:
1. Only update scripts directly related to frontend functionality
2. Do not modify scripts used by other teams without coordination
3. Document any changes in your standup reports
4. Test thoroughly before committing

## Standup Report Requirements

When submitting standup reports:
1. Use the new source format: `repository/branch/feature`
   - Example for main branch: `frontend/main/goalsetter E2E`
   - Example for admin branch: `frontend/admin-branch/dashboard`
2. Submit reports using the webhook system
3. Teams working on the admin tree should work on a separate branch (not main)

## Validation

This rule will highlight if you're attempting to modify files outside of the allowed directories while on the main branch.

```javascript
// Example of directory validation
function validateFilePath(path) {
  if (getCurrentBranch() === 'main') {
    // Check if path is in allowed directories
    const inAllowedDir = path.startsWith('/clients/') || 
                         path.startsWith('/shared/') ||
                         path.startsWith('/scripts/');
                         
    if (!inAllowedDir) {
      console.error(`WARNING: Modification to ${path} not allowed on main branch`);
      return false;
    }
  }
  return true;
}
```

## Collaboration Requirements

1. Reference ticket numbers in commit messages
2. Document changes in standup reports using the correct source format
3. Coordinate with other teams through the webhook communication system
4. Use the standardized reporting format 
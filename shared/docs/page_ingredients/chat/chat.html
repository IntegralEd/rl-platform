<!--
  Chat Component with Accessibility Features
  Version: 1.0.0 - 2024-04-07
  
  Features:
  - Dark/Light mode toggle
  - Fully keyboard accessible
  - Screen reader compatible
  - Responsive design
  - Support for message types and attachments
-->

<div class="chat-container" id="chat-component" role="region" aria-label="Chat conversation">
  <!-- Chat Header with theme toggle -->
  <div class="chat-header">
    <div class="chat-title">
      <h2 id="chat-title">Chat Support</h2>
      <div class="chat-status">
        <span class="status-dot online"></span>
        <span class="status-text">Online</span>
      </div>
    </div>
    
    <!-- Accessibility controls -->
    <div class="chat-controls">
      <button 
        class="theme-toggle" 
        id="theme-toggle" 
        aria-label="Toggle dark mode"
        title="Toggle dark mode">
        <svg class="sun-icon" viewBox="0 0 24 24" width="20" height="20">
          <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0-7c.28 0 .5.22.5.5v2c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-2c0-.28.22-.5.5-.5zm0 18c-.28 0-.5-.22-.5-.5v-2c0-.28.22-.5.5-.5s.5.22.5.5v2c0 .28-.22.5-.5.5zM3.5 12c0-.28.22-.5.5-.5h2c.28 0 .5.22.5.5s-.22.5-.5.5H4c-.28 0-.5-.22-.5-.5zm16.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2c.28 0 .5.22.5.5s-.22.5-.5.5zM5.64 7.05c.2.2.2.51 0 .71l-1.42 1.42c-.2.2-.51.2-.71 0-.2-.2-.2-.51 0-.71l1.42-1.42c.2-.2.51-.2.71 0zm12.72 12.72c-.2-.2-.2-.51 0-.71l1.42-1.42c.2-.2.51-.2.71 0 .2.2.2.51 0 .71l-1.42 1.42c-.2.2-.51.2-.71 0zM5.64 16.95c.2-.2.51-.2.71 0l1.42 1.42c.2.2.2.51 0 .71-.2.2-.51.2-.71 0l-1.42-1.42c-.2-.2-.2-.51 0-.71zm12.72-12.72c-.2.2-.51.2-.71 0L16.24 2.8c-.2-.2-.2-.51 0-.71.2-.2.51-.2.71 0l1.42 1.42c.2.2.2.52-.01.72z"/>
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" width="20" height="20">
          <path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z"/>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Chat Messages -->
  <div class="chat-messages" id="chat-messages" role="log" aria-live="polite" aria-relevant="additions">
    <!-- Example messages for demonstration -->
    <div class="message assistant">
      <div class="message-content">
        <p>Hello! How can I help you today?</p>
        <div class="message-time">9:30 AM</div>
      </div>
    </div>
    
    <div class="message user">
      <div class="message-content">
        <p>I have a question about my assignment.</p>
        <div class="message-time">9:31 AM</div>
      </div>
    </div>
    
    <div class="message assistant">
      <div class="message-content">
        <p>Sure, I'd be happy to help with your assignment. What specific questions do you have?</p>
        <div class="message-time">9:32 AM</div>
      </div>
    </div>
    
    <div class="message assistant">
      <div class="message-content">
        <p>You can also upload relevant files or screenshots if that helps explain your question.</p>
        <div class="message-attachment">
          <div>ðŸ“„ How to format your assignment.pdf</div>
          <a href="#" class="attachment-link">Download</a>
        </div>
        <div class="message-time">9:33 AM</div>
      </div>
    </div>
  </div>
  
  <!-- Typing indicator - hidden by default -->
  <div class="typing-indicator" id="typing-indicator" aria-live="polite" hidden>
    <span></span>
    <span></span>
    <span></span>
    <span class="sr-only">Assistant is typing</span>
  </div>
  
  <!-- Chat Input -->
  <div class="chat-input">
    <form id="chat-form" aria-label="Chat message form">
      <textarea 
        id="user-input" 
        class="user-input" 
        placeholder="Type your message..." 
        rows="1"
        aria-label="Type your message"
        autocomplete="off"
        autocorrect="on"
        spellcheck="true"></textarea>
      
      <div class="input-actions">
        <button 
          type="button" 
          class="attachment-button" 
          aria-label="Add attachment">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
          </svg>
        </button>
        <button 
          type="submit" 
          class="send-button" 
          aria-label="Send message">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Accessible screen reader only elements -->
<div class="sr-only" aria-live="polite" id="sr-announcements"></div>

<!-- Basic script for theme toggling -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Theme toggle functionality
    const themeToggle = document.getElementById('theme-toggle');
    const chatContainer = document.getElementById('chat-component');
    
    // Check for saved theme preference or system preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('chat-theme');
    
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
    
    // Toggle theme when button is clicked
    themeToggle.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('chat-theme', newTheme);
      
      // Announce theme change to screen readers
      document.getElementById('sr-announcements').textContent = 
        newTheme === 'dark' ? 'Dark mode enabled' : 'Light mode enabled';
    });
    
    // Auto-expand textarea as user types
    const userInput = document.getElementById('user-input');
    userInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    });
  });
</script> 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Daily Timesheet Summary</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="timesheet.css">
</head>
<body>
  <div class="page-container">
    <!-- Header -->
    <header class="summary-header">
      <h1>Today's Summary</h1>
      <div class="header-controls">
        <div class="time-display">
          <progress class="time-progress" value="276" max="480"></progress>
          <span class="time-label">4 h 36 m / 8 h</span>
        </div>
        <button type="button" id="submitBtn" class="button primary">
          <svg class="icon" viewBox="0 0 24 24"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>
          Submit Time
        </button>
      </div>
      <div class="summary-chart" id="summaryChart">
        <div class="bar-segment" data-client="ELPL" data-width="53%">
          <span class="tooltip">ELPL â€“ 2 h 26 m</span>
        </div>
        <div class="bar-segment" data-client="ST" data-width="25%">
          <span class="tooltip">ST â€“ 1 h 10 m</span>
        </div>
        <div class="bar-segment" data-client="KIPP" data-width="22%">
          <span class="tooltip">KIPP â€“ 0 h 43 m</span>
        </div>
      </div>
    </header>

    <!-- Main content -->
    <main class="timesheet-main">
      <!-- Entry area -->
      <section class="entry-area">
        <button type="button" id="addRowBtn" class="button secondary">+ Add Row</button>
        
        <div id="entryList" class="entry-list">
          <!-- Template for new entries -->
          <template id="tpl-entry-row">
            <div class="entry-row">
              <select class="client-select">
                <option value="">Client</option>
              </select>
              <select class="project-select" disabled>
                <option value="">Project</option>
              </select>
              <select class="billing-select" disabled>
                <option value="">Billing Code</option>
              </select>
              <input type="text" class="time-input" placeholder="0 h 00 m" pattern="^(\d+\s*h)?\s*(\d+\s*m)?$">
              <button type="button" class="edit-entry">
                <svg class="icon" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
              </button>
            </div>
          </template>
        </div>
      </section>

      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-section" data-collapsed="false">
          <button type="button" class="collapse-btn">Active Projects</button>
          <div class="section-content">
            <div class="project-tag" draggable="true">ðŸ“‹ ED â†’ Exact Path CSM Q4</div>
            <!-- More tags will be added by JS -->
          </div>
        </div>

        <div class="sidebar-section" data-collapsed="true">
          <button type="button" class="collapse-btn">Recent Projects</button>
          <div class="section-content">
            <!-- Will be populated by JS -->
          </div>
        </div>

        <div class="sidebar-section" data-collapsed="true">
          <button type="button" class="collapse-btn">Recent Billing Codes</button>
          <div class="section-content">
            <!-- Will be populated by JS -->
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Modals -->
  <dialog id="submitModal" class="modal">
    <div class="modal-content">
      <h2>Submit Time Entries</h2>
      <label>
        <input type="checkbox" id="affirm">
        <span>I affirm these entries are accurate</span>
      </label>
      <div class="modal-actions">
        <button type="button" class="button secondary close-modal">Cancel</button>
        <button type="submit" class="button primary confirm-submit" disabled>Confirm</button>
      </div>
    </div>
  </dialog>

  <dialog id="entryModal" class="modal">
    <div class="modal-content">
      <h2>Edit Time Entry</h2>
      <label>
        Time
        <input type="text" id="modalTime" class="modal-time-input" placeholder="2h 30m">
      </label>
      <label>
        Description
        <textarea id="modalDesc"></textarea>
      </label>
      <div class="modal-actions">
        <button type="button" class="button secondary close-modal">Cancel</button>
        <button type="button" class="button primary save-entry">Save</button>
      </div>
    </div>
  </dialog>

  <script type="module" src="timesheet.js"></script>
</body>
</html>
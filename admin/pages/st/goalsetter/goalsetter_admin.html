<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goalsetter Admin Panel</title>
    <link rel="stylesheet" href="/admin/assets/css/admin.css">
    <script>
        // Client context
        window.clientId = 'st';
        window.projectId = 'goalsetter';
        
        // Set timezone to CST
        window.timezone = 'America/Chicago';
        
        // Format dates in CST
        window.formatDate = (date) => {
            return new Date(date).toLocaleString('en-US', {
                timeZone: window.timezone,
                dateStyle: 'full',
                timeStyle: 'long'
            });
        };
    </script>
    <!-- Core admin scripts -->
    <script src="/admin/assets/js/auth.js" defer></script>
    <script src="/admin/assets/js/chat.js" defer></script>
    <script src="/admin/assets/js/monitor.js" defer></script>
    <!-- Page specific scripts -->
    <script src="/admin/assets/js/admin.js" defer></script>
    <script src="/admin/assets/js/review_session.js" defer></script>
</head>
<body>
    <!-- Loading indicator -->
    <div id="loading-indicator" class="loading-screen">
        <div class="loader"></div>
        <p>Loading admin panel...</p>
    </div>
    
    <!-- Authentication error -->
    <div id="auth-error" class="auth-error" style="display: none;">
        <h2>Authentication Error</h2>
        <p>You do not have permission to access this page.</p>
        <button onclick="location.href='/admin'">Return to Admin Dashboard</button>
    </div>
    
    <div id="admin-content" style="display: none">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs">
            <a href="/admin">Admin</a> &gt;
            <a href="/admin/pages/st">ST</a> &gt;
            <a href="/admin/pages/st/goalsetter">Goalsetter</a> &gt;
            <span>Admin Panel</span>
        </nav>

        <!-- Action buttons -->
        <div class="admin-actions">
            <button class="primary-button" onclick="window.open('/clients/st/goalsetter/goalsetter.html', '_blank')">Open Live</button>
            <button class="primary-button" onclick="window.open('/clients/st/goalsetter/goalsetter_temp.html', '_blank')">Open Preview</button>
        </div>

        <div class="admin-container">
            <div class="left-panel">
                <!-- Resource Tree Navigation -->
                <div class="resource-tree">
                    <h3>Project Resources</h3>
                    
                    <!-- Resource Item - Goalsetter -->
                    <div class="resource-item expanded">
                        <div class="resource-header">
                            <span class="toggle-icon">‚ñº</span>
                            <img src="/shared/assets/images/StriveTogether-Logo-Black.jpg" alt="ST" class="resource-logo">
                            <span class="resource-name">Goalsetter</span>
                            <div class="status-lights">
                                <span class="status-light active" title="API Connected"></span>
                                <span class="status-light warning" title="Content Status"></span>
                                <span class="status-light error" title="Reviewers"></span>
                            </div>
                        </div>
                        <div class="resource-children">
                            <a href="#" class="resource-link" data-mode="live">
                                <span class="mode-icon">üåê</span>
                                <span class="mode-name">Live View</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="temp">
                                <span class="mode-icon">üîç</span>
                                <span class="mode-name">Preview</span>
                            </a>
                            <a href="#" class="resource-link active" data-mode="review">
                                <span class="mode-icon">üìù</span>
                                <span class="mode-name">Review Sessions</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="lrs">
                                <span class="mode-icon">üìä</span>
                                <span class="mode-name">Analytics</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Resource Item - Continuous Improvement -->
                    <div class="resource-item">
                        <div class="resource-header">
                            <span class="toggle-icon">‚ñ∫</span>
                            <img src="/shared/assets/images/StriveTogether-Logo-Black.jpg" alt="ST" class="resource-logo">
                            <span class="resource-name">Continuous Improvement</span>
                            <div class="status-lights">
                                <span class="status-light active" title="API Connected"></span>
                                <span class="status-light active" title="Content Status"></span>
                                <span class="status-light warning" title="Reviewers"></span>
                            </div>
                        </div>
                        <div class="resource-children" style="display:none">
                            <a href="#" class="resource-link" data-mode="live">
                                <span class="mode-icon">üåê</span>
                                <span class="mode-name">Live View</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="temp">
                                <span class="mode-icon">üîç</span>
                                <span class="mode-name">Preview</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="review">
                                <span class="mode-icon">üìù</span>
                                <span class="mode-name">Review Sessions</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Resource Item - Network Leader -->
                    <div class="resource-item">
                        <div class="resource-header">
                            <span class="toggle-icon">‚ñ∫</span>
                            <img src="/shared/assets/images/StriveTogether-Logo-Black.jpg" alt="ST" class="resource-logo">
                            <span class="resource-name">Network Leader</span>
                            <div class="status-lights">
                                <span class="status-light active" title="API Connected"></span>
                                <span class="status-light error" title="Content Status"></span>
                                <span class="status-light warning" title="Reviewers"></span>
                            </div>
                        </div>
                        <div class="resource-children" style="display:none">
                            <a href="#" class="resource-link" data-mode="live">
                                <span class="mode-icon">üåê</span>
                                <span class="mode-name">Live View</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="temp">
                                <span class="mode-icon">üîç</span>
                                <span class="mode-name">Preview</span>
                            </a>
                            <a href="#" class="resource-link" data-mode="review">
                                <span class="mode-icon">üìù</span>
                                <span class="mode-name">Review Sessions</span>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <button class="action-button" onclick="window.open('/clients/st/goalsetter/goalsetter_review.html?qcid=reclsM4lpZVwg7LnC', '_blank')">
                        <span class="action-icon">üëÅÔ∏è</span>
                        Open Current Review
                    </button>
                    <button class="action-button" onclick="window.open('/clients/st/goalsetter/goalsetter.html', '_blank')">
                        <span class="action-icon">üöÄ</span>
                        Launch Live
                    </button>
                    <button class="action-button" onclick="window.open('/admin/assets/js/review_session.js', '_blank')">
                        <span class="action-icon">üõ†Ô∏è</span>
                        Edit Scripts
                    </button>
                </div>
            </div>
            <div class="right-panel">
                <!-- Tabs -->
                <div class="tab-container">
                    <div class="tab active" data-tab="review">Review Session</div>
                    <div class="tab" data-tab="settings">Settings</div>
                    <div class="tab" data-tab="reports">Reports</div>
                </div>
                
                <!-- Tab Content -->
                <div class="tab-content active" id="review">
                    <!-- Review session content -->
                    <h2>Review Session Management</h2>
                    
                    <div class="section-container">
                        <h3>Active Review Sessions</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Session ID</th>
                                    <th>Reviewer</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="review-sessions-table">
                                <!-- Table rows will be populated dynamically -->
                                <tr>
                                    <td>reclsM4lpZVwg7LnC</td>
                                    <td>Cara</td>
                                    <td>2025-04-07</td>
                                    <td>2025-04-11</td>
                                    <td><span class="badge badge-success">Active</span></td>
                                    <td>
                                        <button class="action-button" onclick="copyReviewLink('reclsM4lpZVwg7LnC')">Copy Link</button>
                                        <button class="action-button" onclick="extendSession('reclsM4lpZVwg7LnC')">Extend</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>recgL7pIF0tNooOEC</td>
                                    <td>Mike</td>
                                    <td>2025-04-01</td>
                                    <td>2025-04-04</td>
                                    <td><span class="badge badge-error">Expired</span></td>
                                    <td>
                                        <button class="action-button" onclick="extendSession('recgL7pIF0tNooOEC')">Extend</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="section-container">
                        <h3>Create New Review Session</h3>
                        <form id="new-review-session" class="form-grid">
                            <div class="form-group">
                                <label for="reviewer-name">Reviewer Name:</label>
                                <input type="text" id="reviewer-name" name="reviewer-name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="reviewer-email">Reviewer Email:</label>
                                <input type="email" id="reviewer-email" name="reviewer-email" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="start-date">Start Date:</label>
                                <input type="date" id="start-date" name="start-date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="end-date">End Date:</label>
                                <input type="date" id="end-date" name="end-date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="reviewer-role">Role:</label>
                                <select id="reviewer-role" name="reviewer-role">
                                    <option value="client_sme">Client SME</option>
                                    <option value="internal">Internal Reviewer</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                            
                            <div class="form-group form-full-width">
                                <label for="review-notes">Notes:</label>
                                <textarea id="review-notes" name="review-notes" rows="3"></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="primary-button">Create Session</button>
                                <button type="button" class="secondary-button" onclick="clearForm()">Clear</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="section-container">
                        <h3>Token Management</h3>
                        <div class="token-actions">
                            <button class="primary-button" onclick="updateReviewPage()">Update Review Page</button>
                            <div class="info-box">
                                <p>This will update the token validation on the review page to match the active review sessions in this panel.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="settings" style="display: none;">
                    <!-- Settings content will be loaded here -->
                    <h2>Settings</h2>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="mode-selector">Display Mode:</label>
                            <select id="mode-selector">
                                <option value="prod">Production</option>
                                <option value="temp" selected>Temporary</option>
                                <option value="review">Review</option>
                            </select>
                        </div>
                        <button class="primary-button" id="save-settings">Save Settings</button>
                    </div>
                </div>
                
                <div class="tab-content" id="reports" style="display: none;">
                    <!-- Reports content will be loaded here -->
                    <h2>Usage Reports</h2>
                    <div class="report-filters">
                        <label for="date-range">Date Range:</label>
                        <select id="date-range">
                            <option value="7">Last 7 days</option>
                            <option value="30" selected>Last 30 days</option>
                            <option value="90">Last 90 days</option>
                        </select>
                        <button class="refresh-button">Refresh</button>
                    </div>
                    <div id="report-container">
                        <p>Select a date range and click refresh to load reports.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer style="text-align: center; padding: 10px;">
        v.1.0.4 push April 5 12:00pm CST
    </footer>
</body>
</html> 